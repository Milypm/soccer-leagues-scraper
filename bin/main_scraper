#!/usr/bin/env ruby
require_relative '../lib/webscraper'

def display_options
  puts ''
  puts "TOP 5 TEAMS 2020-21: Premier League, Serie A, Bundesliga"
  puts 'p for Premier League'
  puts 'a for Serie A'
  puts 'b for Bundesliga'
  puts 'm for Menu'
  puts 'e to Exit'
end

def valid_opt?(option)
  return true if option === 'p' || option === 'a' || option === 'b'
  return true if option === 'e' || option === 'm'
  false
end

def display_menu
  exit_app = false
  until exit_app
    display_options
    puts ''
    loop do
      print 'Select an option: '
      option = gets.chomp.downcase
      if valid_opt?(option)
        if option == 'p'
          new_scraping = Scraping.new('https://www.espn.com/soccer/table/_/league/eng.1')
          puts ''
          puts 'English Premier League:'.red
          new_scraping.match_url
          new_scraping.print_league
          puts ''
        elsif option == 'a'
          new_scraping = Scraping.new('https://www.espn.com/soccer/table/_/league/ita.1')
          puts ''
          puts 'Italian Serie A:'.blue
          new_scraping.match_url
          new_scraping.print_league
          puts ''
        elsif option == 'b'
          new_scraping = Scraping.new('https://www.espn.com/soccer/table/_/league/ger.1')
          puts ''
          puts 'German Bundesliga:'.yellow
          new_scraping.match_url
          new_scraping.print_league
          puts ''
        elsif option == 'm'
          break
        else
          puts 'Thanks for using soccer-leagues-scraper!'
          exit_app = true
        end
      break
      else
        puts 'Invalid option, please try again with one of the letters above'
        puts ''
      end
    end
    puts ''
  end
end
display_menu
