#!/usr/bin/env ruby
require_relative '../lib/webscraper'
require 'colorize'
require 'colorized_string'

def display_options
  puts ''
  puts "TOP 5 TEAMS 2020-21: Premier League, Serie A, Bundesliga\n".green.bold
  puts "p for English Premier League\n\n"
  puts "a for Italian Serie A\n\n"
  puts "b for German Bundesliga\n\n"
  puts "m for Menu\n\n"
  puts "e to Exit\n\n"
end

def valid_opt?(option)
  return true if option == 'p' || option == 'a' || option == 'b'
  return true if option == 'e' || option == 'm'
  false
end

def display_menu
  exit_app = false
  until exit_app
    display_options
    puts ''
    loop do
      print 'Select an option: '
      option = gets.chomp.downcase
      if valid_opt?(option)
        if option == 'p'
          new_scraping = Scraping.new('https://www.espn.com/soccer/table/_/league/eng.1')
          puts ''
          puts "English Premier League:\n".blue.bold
          new_scraping.match_url
          new_scraping.print_league
          puts ''
        elsif option == 'a'
          new_scraping = Scraping.new('https://www.espn.com/soccer/table/_/league/ita.1')
          puts ''
          puts "Italian Serie A:\n".blue.bold
          new_scraping.match_url
          new_scraping.print_league
          puts ''
        elsif option == 'b'
          new_scraping = Scraping.new('https://www.espn.com/soccer/table/_/league/ger.1')
          puts ''
          puts "German Bundesliga:\n".blue.bold
          new_scraping.match_url
          new_scraping.print_league
          puts ''
        elsif option == 'm'
          break
        else
          puts 'Thanks for using soccer-leagues-scraper!'.bold
          exit_app = true
        end
        break
      else
        puts "Invalid option, please try again with one of the
         letters above\n\n".red
      end
    end
    puts ''
  end
end
display_menu
